<div class="mb-4">
    <a href="<?= $baseUrl ?>/categories" class="text-muted text-decoration-none">
        <i class="bi bi-arrow-left me-1"></i><?= $lang->t('back') ?? 'Back' ?>
    </a>
</div>

<h2 class="mb-4"><?= $lang->t('edit_category') ?></h2>

<div class="card" style="max-width: 600px;">
    <div class="card-body">
        <form method="POST" action="<?= $baseUrl ?>/categories/<?= $category['id'] ?>/update">
            <input type="hidden" name="_csrf" value="<?= $csrfToken ?>">

            <div class="mb-4">
                <label class="form-label"><?= $lang->t('category_name') ?> (<?= $lang->t('english') ?>) *</label>
                <input type="text" name="name" class="form-control" value="<?= htmlspecialchars($category['name']) ?>" required>
            </div>

            <div class="mb-4">
                <label class="form-label"><?= $lang->t('category_name') ?> (<?= $lang->t('georgian') ?>)</label>
                <input type="text" name="name_ka" class="form-control" value="<?= htmlspecialchars($category['name_ka'] ?? '') ?>">
            </div>

            <div class="mb-4">
                <label class="form-label"><?= $lang->t('type') ?></label>
                <select name="type" class="form-select">
                    <option value="positive" <?= $category['type'] === 'positive' ? 'selected' : '' ?>><?= $lang->t('positive') ?></option>
                    <option value="negative" <?= $category['type'] === 'negative' ? 'selected' : '' ?>><?= $lang->t('negative') ?></option>
                </select>
            </div>

            <div class="mb-4">
                <label class="form-label"><?= $lang->t('icon') ?></label>
                <div class="d-flex align-items-center gap-3">
                    <span class="d-inline-flex align-items-center justify-content-center rounded-circle"
                          style="width: 48px; height: 48px; background: <?= $category['type'] === 'positive' ? 'var(--positive-bg)' : 'var(--negative-bg)' ?>;">
                        <i class="bi <?= htmlspecialchars($category['icon']) ?>"
                           style="font-size: 1.5rem; color: <?= $category['type'] === 'positive' ? 'var(--positive)' : 'var(--negative)' ?>;"></i>
                    </span>
                    <input type="text" name="icon" class="form-control" value="<?= htmlspecialchars($category['icon']) ?>">
                </div>
            </div>

            <div class="mb-4">
                <label class="form-label"><?= $lang->t('default_points') ?></label>
                <input type="number" name="default_points" class="form-control" value="<?= $category['default_points'] ?>">
            </div>

            <div class="mb-4">
                <label class="form-label"><?= $lang->t('sort_order') ?></label>
                <input type="number" name="sort_order" class="form-control" value="<?= $category['sort_order'] ?>">
            </div>

            <div class="mb-4 form-check">
                <input type="checkbox" name="is_active" class="form-check-input" value="1" id="isActive" <?= $category['is_active'] ? 'checked' : '' ?>>
                <label class="form-check-label" for="isActive"><?= $lang->t('active') ?></label>
            </div>

            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-check-lg me-1"></i><?= $lang->t('save') ?>
                </button>
                <a href="<?= $baseUrl ?>/categories" class="btn btn-outline-secondary">
                    <?= $lang->t('cancel') ?>
                </a>
            </div>
        </form>
    </div>
</div>
